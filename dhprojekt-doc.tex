% !TEX encoding = UTF-8
\documentclass[a4paper,12pt,titlepage=true, ngerman]{scrartcl}
%\usepackage{ngerman}, 
%\usepackage[ngerman]{babel}

\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage[babel]{csquotes}

\usepackage
	[backend=biber, style=authoryear-comp, maxbibnames=3,
	 isbn=false, doi=false, eprint=false, dashed=false]{biblatex}
\ExecuteBibliographyOptions{maxcitenames=2}
\bibliography{literature.bib}
\usepackage{hyperref}
%\hypersetup{
%colorlinks=true, linktocpage=false, pdfborder={0 0 0}, pdfstartview=FitV, 
%urlcolor=Black, linkcolor=Black, citecolor=Black, %pdfstartpage=3, 
%}
\usepackage{graphicx}

\usepackage{scrhack}
\KOMAoptions{BCOR=8mm}
%\KOMAoptions{toc=flat}
% \KOMAoptions{toc=graduated, toc=bibliography}

% \renewcommand*\sectfont{\rmfamily\mdseries\scshape}
\setkomafont{section}{\rmfamily\bfseries\LARGE}
% \setkomafont{sectionentry}{\rmfamily\bfseries\scshape\Large}
\setkomafont{subsection}{\rmfamily\bfseries\Large}
\setkomafont{subsubsection}{\rmfamily\bfseries\large}
%\setkomafont{chapter}{\rmfamily\bfseries\scshape\huge}
%  \setkomafont{partentry}{\rmfamily\bfseries\scshape}
% \setkomafont{chapterentry}{\rmfamily\bfseries\scshape}
\setkomafont{partentry}{\rmfamily\bfseries\scshape}
\setkomafont{part}{\rmfamily\bfseries\scshape\huge}
\setkomafont{partnumber}{\rmfamily\bfseries\scshape\huge}
\setkomafont{partentrypagenumber}{\rmfamily\bfseries\scshape}

\setkomafont{descriptionlabel}{\bfseries}

%  scrhack to fuck float error message

%%%%  for page head and foot %%%%%%%
\usepackage[automark]{scrpage2}
\pagestyle{scrheadings}
\KOMAoptions{headsepline=true}
\setheadsepline{.4pt}
\setkomafont{pageheadfoot}{\normalfont\normalcolor\upshape} 

\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{4}

\usepackage[T1]{fontenc} % to make Sa\"ibi searchable
\usepackage[protrusion=true,expansion=true]{microtype}
% \usepackage{microtype}
% \usepackage{setspace}\setstretch{1.2}



% \usepackage{lmodern} 


%  \usepackage{palatino}\linespread{1.05}
 \usepackage{mathpazo}\linespread{1.05}  
\usepackage[scaled=.95]{helvet}
   \usepackage{courier}
   \usepackage[scaled]{berasans}
 
% \usepackage[bitstream-charter]{mathdesign}  %%%%%%%%%%%%%%%%%%%%%  FINAL VERSION %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage[style=authoryear,
% 	maxnames=1,
%  	maxbibnames=99,                  %%%%%%%%     TODO  activate
% uniquename=init
%]{biblatex}

\usepackage{calc}
\usepackage{ifthen}

\usepackage{tikz}
\usetikzlibrary{shapes,arrows}

\tikzstyle{task} = [diamond, draw, fill=green!20, 
    text width=4.5em, text badly centered, node distance=2cm, inner sep=0pt]
\tikzstyle{comp} = [rectangle, draw, fill=blue!20, 
    text width=5em, text centered, rounded corners, minimum height=4em, node distance=2cm]
\tikzstyle{line} = [draw, -latex']
\tikzstyle{line2} = [draw, double, -latex']
\tikzstyle{human} = [draw, ellipse,fill=red!20, text width=5em, text centered, node distance=2cm,
    minimum height=3em]
\tikzstyle{decision} = [diamond, draw, fill=green!20, 
    text width=4.5em, text badly centered, node distance=3cm, inner sep=0pt]
\tikzstyle{block} = [rectangle, draw, fill=blue!20, 
    text width=5em, text centered, rounded corners, minimum height=4em]
\tikzstyle{cloud} = [draw, ellipse,fill=red!20, text width=5em, text centered, node distance=3cm,
    minimum height=2em]

% % Pie chart
\newcommand{\slice}[4]{
  \pgfmathparse{0.5*#1+0.5*#2}
  \let\midangle\pgfmathresult

  % slice
  \draw[thick,fill=black!10] (0,0) -- (#1:1) arc (#1:#2:1) -- cycle;

  % outer label
  \node[label=\midangle:#4] at (\midangle:1) {};

  % inner label
  \pgfmathparse{min((#2-#1-10)/110*(-0.3),0)}
  \let\temp\pgfmathresult
  \pgfmathparse{max(\temp,-0.5) + 0.8}
  \let\innerpos\pgfmathresult
  \node at (\midangle:\innerpos) {#3};
}

\usepackage{bchart}


\usepackage{setspace}
\onehalfspacing

% \usepackage{framed}

\usepackage{graphicx}

\usepackage{ownstyle}

\usepackage{cleveref}

\usepackage{footnote}


%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\pagenumbering{roman}

\title{Dokumentation zur Arbeit von Gruppe 2 im Projekt ''Praxis der Digital Humanities''} % title
\author{Clemens Ahrens}

\begin{document}
\begin{titlepage}

\begin{center}

\vspace*{100pt}

\textbf{\Large{Dokumentation zur Arbeit von Gruppe 2 im Projekt ''Praxis der Digital Humanities''}}% title

\vfill

Schriftliche Dokumentation

im Seminar

\emph{Praxis der Digital Humanities}


Leitung:

\textbf{Prof.\ Dr.\ Caroline Sporleder}% leitung

WiSe 2014/2015% semester

\bigskip
\bigskip

an der Universität Trier

Fachbereich II

\bigskip
\bigskip

Verfasser:


\textbf{Clemens Ahrens}

Matrikelnummer: 1116125

\textbf{Andre} %TODO

Matrikelnummer: xxxxxx

\textbf{Christopher Michels} %TODO

Matrikelnummer: 1007830

\bigskip
\bigskip

24. Februar 2015

\vfill

\end{center}

\end{titlepage}


%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\include{erklaerung}


%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\newpage

\microtypesetup{protrusion=false}
 \tableofcontents%[liststotoc]
\microtypesetup{protrusion=true}

% \newpage
% \listoffigures
% \listoftables


%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\newpage

\listoffigures


%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\newpage

\listoftables

%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\newpage
\pagenumbering{arabic}

\section{Einleitung}\label{Einleitung} %TODO
 
Im Rahmen des Seminars \emph{Praxis der Digital Humanities} haben sich die einzelnen Gruppen vorgenommen, ein Werkzeug zu entwickeln, das literaturwissenschaftliche Arbeit unterstützt. Diese Hilfssoftware soll dazu dienen, die stereotype Darstellung von einzelnen Personen oder Gruppen in Texten zu analysieren und zu visualisieren. Vor diesem Hintergrund baut die hier vorgestellte Arbeit der zweiten Gruppe auf den Vorverarbeitungsschritten der ersten Gruppe auf und fügt für die drei Werke \emph{Uncle Tom's Cabin}  \autocite[]{chris_uncle}, \emph{To Kill a Mockingbird}  \autocite[]{chris_bird} und \emph{The Adventures of Huckleberry Finn: Tom Sawyer} \autocite[]{chris_adventures} \textbf{Informationen zu Koreferenzketten} hinzu. Auf diese Weise trägt die Gruppe zwei neben der \emph{Named Entity Recognition} als Vorverarbeitungsschritt der ersten Gruppe dazu bei, dass die Protagonisten erkennbar werden und so von der dritten Gruppe auf ihre literarische Darstellung hin untersucht werden können.

Im Folgenden werden \emph{Bart 2.0}, \emph{DCoref} und \emph{Reconcile} als Softwarewerkzeuge vorgestellt, die zunächst für die Koreferenzresolution in Betracht gezogen wurden. Dieser Ausgangspunkt stellte die zweite Gruppe vor die Aufgabe, die einzelnen Werkzeuge zu bewerten und zu vergleichen. Nach der Zusammenfassung des Verlaufs und der Ergebnisse dieses Vergleichs wird dann kurz dargestellt, welche Formatierungsanforderungen für die Schnittstellen zu den anderen Gruppen beachtet wurden und wie kapitelbezogene Koreferenzketten zu kapitelübergreifenden Ketten zusammengeführt wurden. Zuletzt folgt ein Beispiel für die Verwendung und die Ausgabe eines der Werkzeuge.


%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\newpage

\section{Ansätze zur Koreferenzresolution}\label{Ansätze zur Koreferenzresolution} %TODO


%###########################################################################

\subsection{BART 2.0}

\input{clemens_text}


%###########################################################################

\subsection{DCoref}

\input{./text/chris/ansatz_dcoref.tex}


%###########################################################################

\subsection{Reconcile} %TODO


%~~~

\subsubsection{Steckbrief} %TODO


%~~~

\subsubsection{Probleme} %TODO


%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\newpage

\section{Verlauf der Gruppenarbeit}\label{Verlauf der Gruppenarbeit} %TODO


%###########################################################################

\subsection{Vergleich}%TODO


%~~~

\subsubsection{Ausgangssituation}\label{Ausgangssituation}

Wie bereits erwähnt, wurde \emph{BART 2.0} für den Vergleich der Ansätze zur Koreferenzresolution als Kandidat verworfen. Übrig geblieben sind also \emph{DCoref} und \emph{Reconcile}. Das Ziel des Vergleichs war es, mit einem MUC-Scorer anhand der Werte Precision, Recall und F-Score den besseren der verbleibenden zwei Kandidaten zu finden. Um einen Goldstandard für den Vergleich der beiden Ansätze zu erhalten, wurde die erste Hälfte des ersten Kapitels aus \emph{Uncle Tom's Cabin} \autocite[]{chris_uncle} als Testdatensatz für eine manuelle Annotierung mit Unterstützung des dafür vorgesehenen Softwarewerkzeugs \emph{MMAX} \autocite*[]{chris_mmax} verwendet \autocite[]{chris_mmax_coll}. Diese manuelle Annotierung sollte durch zwei Gruppenmitglieder durchgeführt und dann verglichen und verbessert werden, bevor der daraus resultierende Goldstandard für die Bewertung der beiden Ansätze verwendet wurde.


%~~~

\subsubsection{Probleme mit MMAX}%TODO

Die Verwendung von \emph{MMAX} hat bereits von Anfang an zu Problemen geführt. Trotz der vorhandenen Dokumentation war es schwierig, \emph{MMAX} zu verwenden. Beide Annotatoren hatten zunächst den Eindruck, das Werkzeug nicht richtig zu verwenden. Ein Beispiel dafür zeigt Abbildung \ref{mmax:anzeige}.

\begin{figure}[ht]
\begin{center}
\includegraphics[width=15cm]{./img/cmich/cm_mmax.jpg}
 % bart_webUI_output.png: 819x724 pixel, 72dpi, 28.89x25.54 cm, bb=0 0 819 724
\caption{MMAX - Beispiel der Anzeige}
\label{mmax:anzeige}
\end{center}
\end{figure}

Darin ist zu sehen, wie mithilfe von \emph{MMAX} versucht wurde, eine Koreferenzkette für den Protagonisten \emph{Haley} in \emph{Uncle Tom's Cabin} \autocite[]{chris_uncle} zu erstellen. Die Hervorhebung der Kette in gelber Farbe kann über ein mit einem Rechtsklick erreichbares Kontextmenü aktiviert werden, allerdings findet diese Hervorhebung nur in dem im aktuellen Fensterausschnitt sichtbaren Teil des Textes statt. Die türkise Farbe war ursprünglich als Markierungsfarbe für die Kette eines bestimmten Protagonisten gedacht. Dieses Vorhaben hat jedoch nicht funktioniert, da jedes einzelne Wort im Text mit türkiser Farbe markiert wurde. Bei der Erstellung des \emph{MMAX}-Projekts für die Annotierung konnte man verschiedenen Annotierungsebenen unterschiedliche Farben zuordnen, jedoch war es nicht ohne Weiteres möglich, diese Farben sinnvoll einzusetzen, wie das Beispiel in der Abbildung zeigt. Außerdem haben mit der Zeit länger werdende Ketten vermutlich ab einer gewissen Länge Speicherprobleme verursacht und zu korrupten Daten geführt, die wiederholte Abstürze für \emph{MMAX} zur Folge hatten. 

Insgesamt haben diese Probleme dazu geführt, dass es nicht sinnvoll erschien, mehr Zeit in die Suche nach Fehlern und Alternativen bei der Konfiguration eines \emph{MMAX}-Projektes zu investieren. Das vorläufige Ziel des Vergleichs der mit \emph{MMAX} erstellten Ketten wurde folglich als praktisch unmöglich eingeschätzt. Aus diesem Grund hat sich die Frage ergeben, wie das Ziel, einen Goldstandard zu erhalten, auf einem anderen Weg zu erreichen ist.


%~~~

\subsubsection{Alternative Lösung}%TODO

TODO: Standardweg: CoNLL

Als alternativen Lösungsweg hin zu einem Vergleich der Precision-, Recall- und F-Score-Werte für \emph{DCoref} und \emph{Reconcile} hat sich dann die  für die Testdaten angeboten. Diese Ausgabe wurde manuell von zwei Annotatoren korrigiert, um einen Goldstandard zu erhalten. Dabei wurde das \emph{Reconcile}-Ausgabeformat beibehalten. Dann wurde die \emph{DCoref}-Ausgabe für die Testdaten ebenfalls in das \emph{Reconcile}-Ausgabeformat überführt, wie es in Listings  \ref{output:vergleich:decoref} und \ref{output:vergleich:reconcile} zu sehen ist. Dafür mussten lediglich die Informationen innerhalb des <coreferences>-Knotens im Reintext der Testdaten entsprechend als <NP>-Tags an den richtigen Stellen eingefügt werden.

\begin{lstlisting}[label=output:vergleich:decoref, name=vergleich_decoref.xml, language=xml, caption=Ausschnitt der \emph{DCoref}-Ausgabe für die Testdaten]
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<chapter id="1" title="In Which [...] Humanity">
  <sentences/>
  <coreferences>
    ...
    <coreference id="2">
      <mention representative="true">
        <sentence>1</sentence>
        <start>34</start>
        <end>35</end>
        <head>34</head>
        <text>Kentucky</text>
      </mention>
      ...
    </coreference>
    ...
  </coreferences>
</chapter>
\end{lstlisting}

\begin{lstlisting}[label=output:vergleich:reconcile, name=vergleich_reconcile.xml, language=xml, caption=Ausschnitt aus Listing \ref{output:vergleich:reconcile} im \emph{Reconcile}-Ausgabeformat]
... in <NP NO="8" CorefID="8">Kentucky</NP>. There were ...
\end{lstlisting}

\noindent Für die Auswertung hat ein MUC-Scorer sowohl die nicht nachbearbeitete \emph{Reconcile}-Ausgabe als auch die umformatierte \emph{DCoref}-Ausgabe mit dem manuell erstellten Goldstandard verglichen. Die Ergebnisse dieses Auswertung sind in Tabelle \ref{score:ergebnis} zu finden.

\begin{savenotes}
	\begin{table}[ht]
		\centering
  		\begin{tabular}{ l || c | c | c ||  r }
						& Reconcile 	& DCoref 	& DCoref (PP\footnote[1]{PP steht hier für das Post-Processing, das in der optionalen dritten Stufe von \emph{DCoref} stattfindet.}) 	& \\ \hline \hline
    			Precision 	& 0.99673 	& 0.74510	& 0.74837		& \\ \hline
    			Recall     	& 0.97917 	& 0.35775 	& 0.33861 		& \\ \hline
    			FScore    	& 0.98787  	& 0.48340 	& 0.46625 		& \\ \hline
  		\end{tabular}
  		\caption{Auswertung der Ansätze mit einem MUC-Scorer}
  		\label{score:ergebnis}
	\end{table}
\end{savenotes}

Offensichtlich schneidet \emph{Reconcile} viel besser ab als \emph{DCoref}. Dieses Ergebnis liegt wahrscheinlich auch daran, dass die \emph{Reconcile}-Ausgabe als Ausgangspunkt für die Annotierung verwendet wurde, da auf diese Weise der Goldstandard und die \emph{Reconcile}-Ausgabe nicht unabhängig voneinander entstanden sind und deshalb sehr ähnlich sind. Außerdem zeigt die Auswertung auch, dass die optionale dritte Stufe, die bei \emph{DCoref} für die Nachverarbeitung zuständig ist, durch das Entfernen von relevanten \emph{mentions} die Scores negativ beeinflusst, wie es von den Autoren auch beschrieben wurde \autocite[29, 32]{chris_leeetal}.

Da der hier vorgestellte Vergleich nicht optimal abgelaufen ist, wurde die Entscheidung getroffen, sowohl mit \emph{DCoref} als auch mit \emph{Reconcile} Koreferenzinformationen zu erschließen und die jeweilige Ausgabe wie von der dritten Gruppe gewünscht zu formatieren. Dabei wurden die beiden Ansätze allerdings nicht in ein einzelnes System integriert. Die Ausgabedaten wurden mithilfe von separaten Programmen erstellt und entsprechend umformatiert.


%###########################################################################

\subsection{Formatierung}\label{Verlauf:Formatierung}%TODO


%~~~

\subsubsection{DCoref}%TODO

\input{./text/chris/formatieren_dcoref.tex}


%~~~

\subsubsection{Reconcile}%TODO

%###########################################################################

\subsection{Indizierung}\label{Indizierung}%TODO



%\input{clemens_text}

%\input{clemens_code} %TODO

% \input{generierung} %TODO

% \input{normalisierung} %TODO

% \input{evaluierung} %TODO

% \input{ausblick} %TODO


%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\newpage

\section{Zusammenfassung}%TODO


%###########################################################################

\subsection{Aufgabenverteilung}%TODO

Bei der Bestimmung der Kandidaten für die Auswahl eines geeigneten Ansatzes für die Koreferenzresolution hat jedes Gruppenmitglied einen Ansatz übernommen. Clemens Ahrens hat sich mit \emph{BART 2.0} beschäftigt, André Beyer mit \emph{Reconcile} und Christopher Michels mit \emph{DCoref}.

Während Clemens Ahrens ein Programm für die Erstellung kapitelübergreifender Koreferenzketten entwickelt hat und nachdem \emph{BART 2.0} als Kandidat verworfen wurde, haben sich André Beyer und Christopher Michels mit dem Vergleich von \emph{DCoref} und \emph{Reconcile} beschäftigt. Nach vergeblichen Versuchen, \emph{MMAX} und in die betrachteten Softwarewerkzeuge integrierten Scorer für diese Aufgabe zu verwenden, wurde ein Goldstandard im \emph{Reconcile}-Ausgabeformat erstellt. Dann hat André Beyer einen MUC-Scorer für das gleiche Ausgabeformat entwickelt. Um \emph{DCoref} ebenfalls mit diesem MUC-Scorer bewerten zu können, hat Christopher Michels die Ausgabe von \emph{DCoref} für die Testdaten entsprechend umformatiert.

Außerdem hat André Beyer ein Programm zur Umformatierung der Ausgabe von \emph{Reconcile} für das von der dritten Gruppe geforderte Ausgabeformat geschrieben. Analog hat Christopher Michels die Ausgabe von \emph{DCoref} für die Schnittstelle der dritten Gruppe umformatiert. Clemens Ahrens hat mithilfe von ersten funktionierenden Programmversionen unserer Gruppe vorläufige Testdaten für das Buch \emph{Uncle Tom's Cabin} \autocite[]{chris_uncle} an die dritte Gruppe weitergegeben, damit diese neben selbsterstellten Daten weiteres Testmaterial zur Verfügung hatte.

%###########################################################################

\subsection{Kommentar EVENTUELL?}\label{Kommentar}%TODO

TODO: Sowas wie eine kurze abschließende Bewertung vielleicht? Mir (Chris) ist nur nichts Gutes eingefallen und ich muss noch für eine Klausur lernen. Wenn ich noch unbedingt was selbst ändern soll, sagt mir bitte bescheid. Wenn niemand sonst will, lassen wir es weg ... 


%###########################################################################

\subsection{Repositories}\label{Repositories}%TODO

Die folgenden öffentlichen Repositories wurden auf \emph{GitHub} \autocite[]{chris_github} im Rahmen der Gruppenarbeit erstellt und verwendet. Dort sind weitere Details der erstellten Programme sowie Informationen zu deren Verwendung einsehbar.

\begin{itemize}
  \item Umwandler von \emph{Reconcile} zur Schnittstelle der dritten Gruppe:\par \url{https://github.com/beyeran/transform-reconcile}\vspace{0.3cm}
  \item MUC Scorer für die \emph{Reconcile}-Dateien:\par \url{https://github.com/beyeran/score-coref}\vspace{0.3cm}
  \item Umwandlung von \emph{DCoref} zur Schnittstelle der dritten Gruppe:\par \url{https://github.com/cmich/dh-projekt-gruppe2-dcoref}\vspace{0.3cm}
  \item \emph{DCoref} für die Eingabedaten:\par \url{https://github.com/Rostu/dh-Projekt-Gruppe1}\vspace{0.3cm}
  \item Erstellung der Indexdatei für kapitelübergreifende Koreferenzketten: \par \url{https://github.com/ClemensAhrens/BuildIndex}\vspace{0.3cm}
\end{itemize}


%###########################################################################
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%###########################################################################

\newpage

% \printshorthands[title=Abkürzungsverzeichnis]
\printbibliography[title=Literaturverzeichnis, heading=bibintoc]


\end{document}